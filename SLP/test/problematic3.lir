# string literals #
str1: "foo"
str2: "bar"

# error messages #
error_null_ref: "Runtime Error: Null pointer dereference!"
error_array_bounds: "Runtime Error: Array index out of bounds!"
error_array_negative: "Runtime Error: Array allocation with negative array size!"
error_zero_division: "Runtime Error: Division by zero!"

# dispatch table #
_DV_C: ]

# runtime checks #
__checkNullRef:
Move a, R0
Compare 0, R0
JumpTrue _error_checkNullRef
Return Rdummy
_error_checkNullRef:
Library __println(error_null_ref), Rdummy
Library __exit(1), Rdummy

__checkArrayAccess:
ArrayLength a, R0
Compare i, R0
JumpLE _error_checkArrayAccess
Move i, R0
Compare 0, R0
JumpL _error_checkArrayAccess
Return Rdummy
_error_checkArrayAccess:
Library __println(error_array_bounds), Rdummy
Library __exit(1), Rdummy

__checkSize:
Move n, R0
Compare 0, R0
JumpL _error_checkSize
Return Rdummy
_error_checkSize:
Library __println(error_array_negative), Rdummy
Library __exit(1), Rdummy

__checkZero:
Move b, R0
Compare 0, R0
JumpTrue _error_checkZero
Return Rdummy
_error_checkZero:
Library __println(error_zero_division), Rdummy
Library __exit(1), Rdummy


_ic_main:
Move str1, R1
Move R1, s13
Move str2, R1
Move R1, s23
Move s13,R1
Move s23,R2
Library __stringCat(R1,R2),R1
Move R1, s33
